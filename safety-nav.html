<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Safety Navigator</title>
    <!-- unpkg CDN non-minified -->
    <script src="https://unpkg.com/neo4j-driver@1.7.0/lib/browser/neo4j-web.min.js"></script>
    <link rel="stylesheet" href="jquery-ui-1.12.1.custom/jquery-ui-1.12.1.custom/jquery-ui.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css"
          integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
          crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
            integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
            crossorigin=""></script>
    <script src="heatmap.js"></script>
    <script src="leaflet-heatmap.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
    $( function() {
      var availableTags = ["22nd Street and Ford Avenue","22nd Street and Cedar Street","22nd Street","22nd Street and Walnut Street","22nd Street and Vinewood Street","22nd Street and Oak Street","22nd Street and Goddard Road","22nd Street and Antoine Street","22nd Street and Clark Street","Superior Boulevard and 14th Street","14th Street","Chestnut Street and 14th Street","Oak Street and 14th Street","Elm Street and 14th Street","Dee Street and 14th Street","Sycamore Street and 14th Street","14th Street and Pine Street","14th Street and Orchard Street","14th Street and Grove Street","14th Street and Ford Avenue","Monroe Elementary School","Balsam Street and Fort Street","Alkali Street and Electric Street","Alkali Street",
      "Perry Place","Perry Place and Clifford Street","Perry Place and Biddle Avenue","Perry Place and 1st Street","Perry Place and 2nd Street","Perry Place and 3rd Street","Perry Place and James Street","Perry Place and Electric Street","Saint John's Street","Goddard Road","Moran Avenue and River Drive","Moran Avenue and Electric Avenue","Moran Avenue and Gohl Road","Moran Avenue and Wilson Avenue","Moran Avenue and Ferris Avenue","Moran Avenue","Moran Avenue and Fort Street","Oakdale Street and Fort Street","Oakdale Street","Grove Street and 19th Street","Grove Street and 20th Street","Grove Street and 21st Street","Grove Street and 23rd Street","Grove Street and Fort Street","Leroy Street and Fort Street",
      "Grove Street and 11th Street","Grove Street and 13th Street","Grove Street and 15th Street","Grove Street and 16th Street","Biddle Avenue","5th Street","Albion Street","6th Street","7th Street","8th Street","9th Street","9th Street and River Court","9th Street and Saint John's Street","9th Street and Goddard Road","9th Street and Orange Street","Pine Street and 9th Street","9th Street and Ford Avenue","9th Street and Cedar Street","9th Street and Walnut Street","9th Street and Vinewood Street","9th Street and Superior Boulevard","9th Street and Pope John Paul II Avenue","9th Street and Ash Street","9th Street and Chestnut Street","9th Street and Oak Street",
      "9th Street and Elm Street","9th Street and Pine Street","9th Street and Cherry Street","9th Street and Plum Street","9th Street and Orchard Street","Highland Avenue and Shore Drive and River Drive","Highland Avenue","Highland Avenue and Electric Avenue","Highland Avenue and Gohl Road","Highland Avenue and Wilson Avenue","Highland Avenue and Ferris Avenue","Highland Avenue and Fort Street","21st Street and Pine Street","21st Street and Orchard Street","21st Street","21st Street and Ford Avenue","21st Street and Cedar Street","21st Street and Walnut Street","21st Street and Vinewood Street","21st Street and Goddard Road","Baumey Street and 21st Street","21st Street and Antoine Street","21st Street and Clark Street","21st Street and Superior Boulevard","21st Street and Oak Street",
      "Clifford Street","Clifford Street and Saint John's Street","Backus Street and Fort Street","Saint Johns Boulevard","Saint Johns Boulevard and Gohl Road","Saint Johns Boulevard and Wilson Avenue","Saint Johns Boulevard and Ferris Avenue","Saint Johns Boulevard and Fort Street","Saint Johns Boulevard and Drouillard Avenue","Saint John's Street and Biddle Avenue","Saint John's Street and 4th Street","Saint John's Street and 5th Street","Saint John's Street and Lincoln Street","Saint John's Street and 6th Street","Saint John's Street and 7th Street","Saint John's Street and 8th Street","Saint John's Street and Cora Street","Saint John's Street and Electric Street","Albion Street and Hillsdale Street","Drouillard Avenue","Labadie Street and Biddle Avenue","Labadie Street and 2nd Street","Virginia Avenue","Virginia Avenue and Walnut Street","Van Alstyne Boulevard and Oak Street",
      "Oak Street","Oak Street and Biddle Avenue","1st Street and Oak Street","2nd Street and Oak Street","3rd Street and Oak Street","4th Street and Oak Street","5th Street and Oak Street","6th Street and Oak Street","7th Street and Oak Street","Electric Street and Oak Street","10th Street and Oak Street","11th Street and Oak Street","12th Street and Oak Street","15th Street and Oak Street","20th Street and Oak Street","23rd Street and Oak Street","Oak Street and Fort Street","Orchard Street and Fort Street","Vinewood Street","5th Street and Walnut Street","5th Street and Poplar Street","5th Street and Vinewood Street","5th Street and Superior Boulevard","Superior Boulevard and 5th Street","Chestnut Street and 5th Street",
      "Elm Street and 5th Street","Sycamore Street and 5th Street","Orange Street and 5th Street","Pine Street and 5th Street","Cherry Street and 5th Street","Plum Street and 5th Street","5th Street and Orchard Street","5th Street and Goddard Road","5th Street and Antoine Street","5th Street and Ford Avenue","5th Street and Spruce Street","5th Street and Cedar Street","5th Street and Bondie Street","Cedar Street and 12th Street","Cedar Street","Cedar Street and 15th Street","Cedar Street and 19th Street","Cedar Street and 20th Street","Cedar Street and 23rd Street","Cedar Street and 7th Street","Cedar Street and 8th Street","Cedar Street and Cora Street","Cedar Street and Electric Street","Cedar Street and 10th Street","Cedar Street and 11th Street",
      "Cedar Street and James Desana Drive and Biddle Avenue","Cedar Street and 1st Street","Cedar Street and 2nd Street","Cedar Street and 3rd Street","Cedar Street and 4th Street","Arch Street","Arch Street and 11th Street","10th Street and Ford Avenue","10th Street and Mulberry Street","10th Street and Mollno Street and Walnut Street","10th Street and Walnut Street","10th Street and Vinewood Street","10th Street and Superior Boulevard","10th Street and Pope John Paul II Avenue","10th Street and Goddard Road","10th Street","10th Street and Antoine Street","10th Street and Hudson Street","Elm Street","Elm Street and Biddle Avenue","Elm Street and 1st Street","Elm Street and 2nd Street","Elm Street and 3rd Street","Elm Street and 4th Street","6th Street and Elm Street",
      "7th Street and Elm Street","Elm Street and 11th Street","Elm Street and 12th Street","Elm Street and 15th Street","Elm Street and 20th Street","Negaunee Street and Biddle Avenue","Negaunee Street","Gohl Road and Kings Highway","Gohl Road and Riverbank Street","Gohl Road and Michigan Boulevard","Gohl Road and Leblanc Street","Gohl Road and Ford Boulevard","Gohl Road","Gohl Road and Cloverlawn Boulevard","Gohl Road and Harrison Boulevard","Pine Street and 19th Street","Orchard Street and 19th Street","Marshall Street and 19th Street","Ludington Street and 19th Street","19th Street and Ford Avenue","19th Street and Walnut Street","19th Street and Vinewood Street","19th Street and Goddard Road","19th Street and Antoine Street","19th Street",
      "19th Street and Clark Street","Antoine Street and 23rd Street","Antoine Street and Fort Street","Antoine Street and Biddle Avenue","Antoine Street","Antoine Street and 2nd Street","Antoine Street and Hudson Street","Antoine Street and Lincoln Street","Antoine Street and 6th Street","Antoine Street and 7th Street","Antoine Street and 8th Street","Antoine Street and Cora Street","Antoine Street and Electric Street","Antoine Street and 11th Street","Antoine Street and 12th Street","Antoine Street and 13th Street","Antoine Street and 15th Street","Antoine Street and 16th Street","Antoine Street and 20th Street","Oxford Court and 12th Street","Oxford Court","Oxford Court and 15th Street","Hillsdale Street","Bondie Street and Biddle Avenue","Bondie Street",
      "Bondie Street and Alfred Street","Bondie Street and 4th Street","Bondie Street and Lincoln Street","Bondie Street and 6th Street","Bondie Street and 8th Street","Bondie Street and Cora Street","Netherwood Street and Fort Street","Netherwood Street","Clinton Street","Clinton Street and Biddle Avenue","Clinton Street and Alfred Street","Clinton Street and 4th Street","Clinton Street and 6th Street","Leblanc Street and River Drive","Leblanc Street and Wilson Avenue","Leblanc Street and Ferris Avenue","Leblanc Street","Leblanc Street and Fort Street","Bennett Street and Biddle Avenue","Bennett Street and 2nd Street","Cadon Street and 11th Street","Cadon Street","North Riverbank Street","North Riverbank Street and 2nd Street","Wesley Street and Fort Street",
      "Edison Street","Ford Boulevard and River Drive","Ford Boulevard and Wilson Avenue","Ford Boulevard and Ferris Avenue","Ford Boulevard","Ford Boulevard and Fort Street","Walnut Street and Fort Street","Pullman Street and Fort Street","Pullman Street","15th Street and Ford Avenue","15th Street and Spruce Street","15th Street and Walnut Street","15th Street","15th Street and Vinewood Street","15th Street and Superior Boulevard","15th Street and Goddard Road","15th Street and Clark Street","Marshall Street and 15th Street","Ludington Street and 15th Street","Saint Ignace Street and 15th Street","15th Street and Pennsylvania Road","15th Street and Chestnut Street","15th Street and Dee Street","15th Street and Sycamore Street","Pine Street and 15th Street",
      "Orchard Street and 15th Street","Michigan Boulevard and Wilson Avenue","Michigan Boulevard","Michigan Boulevard and Ferris Avenue","Michigan Boulevard and Fort Street","Saint Ignace Street and 23rd Street","Saint Ignace Street and Quarry Road","Saint Ignace Street","Saint Ignace Street and 7th Street","Riverbank Street and River Drive","Riverbank Street and Electric Avenue","Riverbank Street and Wilson Avenue","Riverbank Street and Ferris Avenue","Riverbank Street","Riverbank Street and Fort Street","Riverbank Street and Alfred Street","Riverbank Street and 4th Street","Riverbank Street and 6th Street","Ford Avenue and Biddle Avenue","Ford Avenue","2nd Street and Ford Avenue","Ford Avenue and 2nd Street","Ford Avenue and 3rd Street","4th Street and Ford Avenue","Ford Avenue and 6th Street",
      "Ford Avenue and 7th Street","Ford Avenue and 8th Street","Ford Avenue and Cora Street","Ford Avenue and Electric Street","Ford Avenue and 11th Street","12th Street and Ford Avenue","13th Street and Ford Avenue","16th Street and Ford Avenue","20th Street and Ford Avenue","23rd Street and Ford Avenue","Ford Avenue and Fort Street","Fort Street and Northline Road","12th Street and Spruce Street","12th Street and Glenn Court","12th Street and Mulberry Street","12th Street and Mollno Street","12th Street and Walnut Street","12th Street and Poplar Court and Poplar Street","12th Street and Vinewood Street","12th Street and Superior Boulevard","12th Street","12th Street and Chestnut Street","12th Street and Sycamore Street","12th Street and Pine Street","12th Street and Lee Street",
      "12th Street and Goddard Road","Drouillard Street and Goddard Road","Drouillard Street and Brest Street","Pope John Paul II Avenue and Electric Street","Superior Boulevard and 20th Street","Superior Boulevard","6th Street and Superior Boulevard","4th Street and Superior Boulevard","3rd Street and Superior Boulevard","2nd Street and Superior Boulevard","1st Street and Superior Boulevard","Biddle Avenue and Superior Boulevard","Superior Boulevard and Van Alstyne Boulevard","Superior Boulevard and 11th Street","Van Alstyne Boulevard and Superior Boulevard","Superior Boulevard and Biddle Avenue","Superior Boulevard and 1st Street","Superior Boulevard and 2nd Street","Superior Boulevard and 3rd Street","Superior Boulevard and 4th Street","Superior Boulevard and 6th Street","Northline Road","Sycamore Street and Van Alstyne Boulevard","Sycamore Street and Biddle Avenue","Sycamore Street",
      "Sycamore Street and 3rd Street","4th Street and Sycamore Street","Sycamore Street and 20th Street","Sycamore Street and 11th Street","Sycamore Street and Fort Street","Pennsylvania Road and 7th Street","Electric Street and Pennsylvania Road","Pennsylvania Road and 13th Street","16th Street and Pennsylvania Road","Pennsylvania Road","Reno Street and Pennsylvania Road","23rd Street and Pennsylvania Road","Quarry Road and Pennsylvania Road","Adelaide Street","Adelaide Street and 11th Street","Fort Street","Spruce Street and Fort Street","Peach Street and Fort Street","Cherry Street and Fort Street","Orange Street and Fort Street","Mercier Street and Fort Street","Veronica Street and Fort Street","Chestnut Street and Fort Street","Argyle Street and Fort Street","Commonwealth Street and Fort Street",
      "Fort Street and Superior Street","Jobin Street and Fort Street","Castle Street and Fort Street","Cunningham Street and Fort Street","Kerr Street and Fort Street","Callendar Street and Fort Street","Birrell Street and Fort Street","Rosedale Street and Fort Street","Fort Street and Goddard Road","Kings Highway and Fort Street","Cloverlawn Boulevard and Fort Street","Harrison Boulevard and Fort Street","Clark Street and Fort Street","Vinewood Street and Fort Street","Pine Street and Fort Street","Fort Street and Quarry Road","2nd Street","2nd Street and Riverbank Street and Riverbank Alley","2nd Street and Goddard Road","2nd Street and Stoll Street","2nd Street and Goodell Street","Baumey Street and 2nd Street","2nd Street and Felice Street","2nd Street and Hudson Street","2nd Street and Clark Street",
      "Miller Street and 2nd Street","Sullivan Street and 2nd Street","2nd Street and Spruce Street","2nd Street and Mulberry Street","2nd Street and Walnut Street","2nd Street and Poplar Street","2nd Street and Vinewood Street","2nd Street and Chestnut Street","Emmons Court and Biddle Avenue","Emmons Court","7th Street and Goddard Road","7th Street and Hudson Street","Hillsdale Street and 7th Street","7th Street and Walnut Street","7th Street and Orange Street","7th Street and Pine Street","7th Street and Cherry Street","7th Street and Plum Street","7th Street and Orchard Street","7th Street and Chestnut Street","23rd Street","23rd Street and Marshall Street","23rd Street and Ludington Street","23rd Street and Goddard Road","Walnut Street and 23rd Street",
      "Vinewood Street and 23rd Street","23rd Street and Vinewood Street","Pine Street and 23rd Street","Orchard Street and 23rd Street","Cherry Street and 3rd Street","Cherry Street and 4th Street","Cherry Street and 6th Street","Cherry Street and 8th Street","Cherry Street","Cherry Street and 11th Street","Kings Highway and 4th Street","Kings Highway and 6th Street","Kings Highway and Shore Drive","Kings Highway","Kings Highway and River Drive","Kings Highway and Electric Avenue","Kings Highway and Wilson Avenue","Kings Highway and Ferris Avenue","Cloverlawn Boulevard","Cloverlawn Boulevard and Wilson Avenue","Cloverlawn Boulevard and Ferris Avenue","Ash Street","Ash Street and 20th Street","Stoll Street","Mollno Street",
      "Biddle Avenue and Ludington Street","Biddle Avenue and Wye Street","4th Street and Biddle Avenue","Orchard Street and Biddle Avenue","Plum Street and Biddle Avenue","Pine Street and Biddle Avenue","Kreger Drive and Biddle Avenue","Chestnut Street and Biddle Avenue","Vinewood Street and Biddle Avenue","Poplar Street and Biddle Avenue","Walnut Street and Biddle Avenue","Mulberry Street and Biddle Avenue","Spruce Street and Biddle Avenue","Sullivan Street and Biddle Avenue","Miller Street and Biddle Avenue","Clark Street and Biddle Avenue","Hudson Street and Biddle Avenue","Goodell Street and Biddle Avenue","Goddard Road and Biddle Avenue","Riverbank Street and Biddle Avenue","New Street and Biddle Avenue","Biddle Avenue and Central Avenue","Commonwealth Street","Ludington Street and 16th Street","20th Street and Ludington Street",
      "Ludington Street and Quarry Road","Pine Street","Pine Street and 3rd Street","Pine Street and 4th Street","Pine Street and 6th Street","Pine Street and 8th Street","Pine Street and 13th Street",
      "Pine Street and 16th Street","Pine Street and 20th Street","Pine Street and 11th Street","6th Street and Chestnut Street","6th Street and Orange Street","6th Street and Plum Street","6th Street and Orchard Street","Goddard Road and 6th Street","Hudson Street and 6th Street","Hillsdale Street and 6th Street","6th Street and Walnut Street","6th Street and Poplar Street","6th Street and Vinewood Street","1st Street and Goddard Road","1st Street","1st Street and Goodell Street",
      "1st Street and Spruce Street","1st Street and Mulberry Street","1st Street and Walnut Street","1st Street and Poplar Street","1st Street and Vinewood Street","1st Street and Chestnut Street","Ludington Street","11th Street and Vinewood Street","11th Street","11th Street and Chestnut Street","11th Street and Goddard Road","11th Street and Hudson Street","11th Street and Orange Street","11th Street and Lee Street","11th Street and Orchard Street","Mulberry Street and 4th Street",
      "Mulberry Street and 3rd Street","Mulberry Street","Vinewood Street and Van Alstyne Boulevard","Vinewood Street and 3rd Street","Vinewood Street and 4th Street","Vinewood Street and 8th Street","Vinewood Street and Cora Street","Vinewood Street and Electric Street","Vinewood Street and 20th Street","Goddard Road and Lincoln Street","Goddard Road and Electric Street","Goddard Road and Harrison Boulevard and 13th Street","16th Street and Goddard Road","20th Street and Ferris Avenue and Goddard Road",
      "Goddard Road and 3rd Street","Goddard Road and James Street","Goddard Road and 4th Street","Goddard Road and Cora Street","Goddard Road and 8th Street","Van Alstyne Boulevard and Poplar Street","Van Alstyne Boulevard","Van Alstyne Boulevard and Chestnut Street","Wye Street","Harrison Boulevard","Wilson Avenue and Harrison Boulevard","Ferris Avenue and Harrison Boulevard","Felice Street","James Street","Electric Street and Hudson Street","Electric Street","4th Street and Orchard Street",
      "8th Street and Orchard Street","Orchard Street","Orchard Street and 13th Street","Orchard Street and 16th Street","Orchard Street and 20th Street","Poplar Court","Hazel Street and Electric Street","Walnut Street and Poplar Street","Walnut Street","Walnut Street and 20th Street","Walnut Street and 8th Street","Walnut Street and Cora Street","Walnut Street and Electric Street","Walnut Street and 3rd Street","4th Street and Walnut Street","Callendar Street",
      "Dee Street and 20th Street","Saint Ignace Street and 16th Street","Marshall Street and 20th Street","20th Street and Clark Street","20th Street and Chestnut Street","Cora Street and Hudson Street","Cora Street","Quarry Road","Marshall Street and Quarry Road","River Drive","Miller Street","16th Street and Clark Street","16th Street and Marshall Street","Clark Street","Plum Street","Plum Street and 3rd Street","Plum Street and 4th Street","Plum Street and 8th Street","Spruce Street","Rosedale Street",
      "13th Street and Lee Street","13th Street","River Court","Baumey Street","Chestnut Street","Chestnut Street and 3rd Street","Chestnut Street and 4th Street","Ferris Avenue","Lincoln Street","Hudson Street","8th Street and Hudson Street","Hillsdale Street and 8th Street","Kreger Drive","Orange Street and 8th Street","Electric Avenue","Poplar Street","Poplar Street and 3rd Street","4th Street and Poplar Street","Shore Drive","Glenn Court","Kerr Street","Orange Street and 3rd Street","Orange Street and 4th Street","Orange Street","Spruce Street and 3rd Street",
      "Spruce Street and 4th Street","Goodell Street","Goodell Street and 3rd Street","Brest Street","3rd Street","Wilson Avenue","4th Street","Brest Street and Fort Street","South Branch Ecorse River","Ford Avenue and Northline Road","Eureka Road","James Desana Drive","20th Street","South Riverbank Street","Huntington Creek","Maple Street","Madison School","Labadie Street",
      "Bennett Street","Theodore Roosevelt High School","16th Street","17th Street","18th Street","1st Street and Maple Street","23rd Street and Clark Street","Davis Street","Clark Street and 23rd Street","E.W. Smith Agency Private Parking","Henry Ford Wyandotte Hospital","McKinley Street","McKinley Street and Goodell Street","McKinley Street and Baumey Street","McKinley Street and Felice Street","McKinley Street and Antoine Street","Hudson Street and McKinley Street","Clark Street and McKinley Street",
      "Alkali Street and McKinley Street","Davis Street and McKinley Street","Ford Avenue and McKinley Street","Catalpa Street and Fort Street","Grove Street","Marshall Street","Central Avenue","Wesley Street","Ward Street","Birrell Street","Harrison Boulevard and River Drive","Plum Street and Fort Street","Ward Street and Fort Street","Garfield Elementary School","Lindbergh Street","Garfield Street","Pope John Paul II Avenue","Forest Street","Sullivan Street","West Jefferson Avenue","The Lincoln Center",
      "Wilson Middle School","Jefferson Elementary School","Cherry Street and 13th Street","22nd Street and Marshall Street","14th Street and Monroe Elementary School","14th Street and Marshall Street","Saint John's Street and 2nd Street","Saint John's Street and 3rd Street","Bennett Street and 3rd Street","Labadie Street and 3rd Street","Edison Street and Fort Street","Cedar Street and Fort Street","Pennsylvania Road and Biddle Avenue and West Jefferson Avenue",
      "Biddle Avenue and West Jefferson Avenue and Pennsylvania Road","Eureka Road and 23rd Street","Eureka Road and Fort Street","Eureka Road and Van Alstyne Boulevard","Eureka Road and Biddle Avenue","Eureka Road and 9th Street","11th Street and Eureka Road","12th Street and Eureka Road","13th Street and Eureka Road","Eureka Road and 14th Street","14th Street and Eureka Road","15th Street and Eureka Road","16th Street and Eureka Road","17th Street and Eureka Road","18th Street and Eureka Road","Eureka Road and 19th Street",
      "20th Street and Eureka Road","21st Street and Eureka Road","22nd Street and Eureka Road","23rd Street and Eureka Road","3rd Street and Eureka Road","4th Street and Eureka Road","Eureka Road and 5th Street","6th Street and Eureka Road","Eureka Road and 7th Street","Phelps Street and Fort Street","Alfred Street and Highland Street","Highland Street and 4th Street","Highland Street and 6th Street","Highland Street and Riverside Drive","Baumey Street and 22nd Street","Baumey Street and 23rd Street","Baumey Street and Fort Street","Baumey Street and 5th Street","Baumey Street and Lincoln Street","Baumey Street and 6th Street","Baumey Street and Lindbergh Street","Baumey Street and 7th Street","Baumey Street and 8th Street","Baumey Street and Cora Street",
      "Baumey Street and Electric Street","Baumey Street and 10th Street","Baumey Street and 11th Street","Baumey Street and 12th Street","Baumey Street and 13th Street","Baumey Street and 3rd Street","Venness Street and Fort Street",
      "18th Street and Goddard Road","18th Street and Antoine Street","18th Street and Clark Street","18th Street and Davis Street","18th Street and Ford Avenue","18th Street and Pine Street","18th Street and Orchard Street","18th Street and Grove Street","18th Street and Marshall Street","18th Street and Ludington Street","18th Street and Saint Ignace Street","18th Street and Pennsylvania Road","18th Street and Cedar Street","18th Street and Walnut Street","18th Street and Vinewood Street",
      "Forest Street and Biddle Avenue","Forest Street and 4th Street","Forest Street and 5th Street","Forest Street and 6th Street","Forest Street and 7th Street","Forest Street and 8th Street","Forest Street and 9th Street","Forest Street and 11th Street","Davis Street and 15th Street","Davis Street and 16th Street","Davis Street and 17th Street","Davis Street and 19th Street","Davis Street and 20th Street","Davis Street and 21st Street","Davis Street and 22nd Street","Davis Street and 23rd Street",
      "Davis Street and Fort Street","Davis Street and 6th Street","Davis Street and Lindbergh Street","Davis Street and 7th Street","Davis Street and 8th Street","Davis Street and Cora Street","Davis Street and Electric Street","Davis Street and 10th Street","Davis Street and Biddle Avenue","Davis Street and 2nd Street","Davis Street and 3rd Street","Davis Street and 4th Street","Davis Street and 5th Street","River Drive and Perry Place","River Drive and Hazel Street","River Drive and Goddard Road","Vassar Street and Biddle Avenue","Vassar Street","Marshall Street and 8th Street",
      "Marshall Street and 7th Street","Marshall Street and 6th Street","Central Avenue and Biddle Avenue","Central Avenue and 5th Street","Central Avenue and Hillsdale Street","Central Avenue and Albion Street","Central Avenue and 6th Street","Central Avenue and 7th Street","Central Avenue and 8th Street","Central Avenue and Pennsylvania Road","Lindbergh Street and Goddard Road","Lindbergh Street and Antoine Street",
      "Lindbergh Street and Hudson Street","Lindbergh Street and Alkali Street","Lindbergh Street and Ford Avenue","Lindbergh Street and Bondie Street","Lindbergh Street and Saint John's Street","Garfield Street and Bondie Street","Garfield Street and Saint John's Street","17th Street and Vinewood Street","17th Street and Superior Boulevard","17th Street and Ash Street","17th Street and Chestnut Street","17th Street and Oak Street","17th Street and Elm Street","17th Street and Maple Street","17th Street and Dee Street","17th Street and Sycamore Street","Pine Street and 17th Street","Orchard Street and 17th Street","Grove Street and 17th Street","17th Street and Wilson Avenue and Goddard Road","17th Street and Antoine Street","17th Street and Clark Street","17th Street and Ford Avenue","Marshall Street and 17th Street",
      "Ludington Street and 17th Street","Saint Ignace Street and 17th Street","17th Street and Pennsylvania Road","17th Street and Cedar Street",
      "17th Street and Walnut Street","Alkali Street and 6th Street","Alkali Street and 7th Street","Alkali Street and 8th Street","Alkali Street and Cora Street","Alkali Street and Biddle Avenue","Alkali Street and 2nd Street","Alkali Street and 3rd Street","Alkali Street and 4th Street","5th Street and Alkali Street","Alkali Street and 10th Street","Alkali Street and 11th Street","Alkali Street and 12th Street","Alkali Street and 13th Street","Alkali Street and 14th Street","Alkali Street and 15th Street","Maple Street and Van Alstyne Boulevard","Maple Street and Biddle Avenue","2nd Street and Maple Street","Maple Street and 3rd Street","4th Street and Maple Street","Maple Street and 5th Street","6th Street and Maple Street","7th Street and Maple Street","Maple Street and 9th Street",
      "Maple Street and 11th Street","Maple Street and 12th Street","Maple Street and 14th Street","Maple Street and 15th Street","Maple Street and 20th Street","Maple Street and 23rd Street",
      "Maple Street and Fort Street","Maple Street and 21st Street","Emmons Boulevard","Vreeland Street","Reno Street and Vreeland Street","Quarry Road and Vreeland Street","South Riverbank Street and North Riverbank Street and Riverbank Street and Riverbank Alley","South Riverbank Street and 2nd Street","Kings Highway and Riverside Drive","Riverside Drive","Riverbank Street and Riverside Drive","Clinton Street and Riverside Drive","9th Street and Bondie Street and Riverside Drive",
      "22nd Street and Pine Street","22nd Street and Orchard Street","22nd Street and Grove Street"];
      $( "#start" ).autocomplete({
        source: availableTags
      });
      $( "#dest" ).autocomplete({
        source: availableTags
      });
    });
    </script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Trebuchet MS", Helvetica, sans-serif;
      }

      #header {
        width: 100%;
        margin: 0px;
        padding: 30px;
        padding-left: 60px;
        height: 80px;
        color: white;
        background-color: green;
      }

      #map {
        height: 600px;
        width: 60%;
        float: left;
        margin: 20px;
      }

      #sidebar {
        float: right;
        color: green;
        display: block;
        text-align:center;
        width: 30%;
        padding: 50px;
      }

      input {
        border: 5px solid white;
        -webkit-box-shadow:
          inset 0 0 8px  rgba(0,0,0,0.1),
                0 0 16px rgba(0,0,0,0.1);
        -moz-box-shadow:
          inset 0 0 8px  rgba(0,0,0,0.1),
                0 0 16px rgba(0,0,0,0.1);
        box-shadow:
          inset 0 0 8px  rgba(0,0,0,0.1),
                0 0 16px rgba(0,0,0,0.1);
        padding: 15px;
        background: rgba(255,255,255,0.5);
        margin: 0 0 10px 0;
      }

      button {
        background-color: #4CAF50; /* Green */
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <div id="header">
      <h1>Safety Navigator</h1>
    </div>
    <div id="map"></div>
    <div id="sidebar">
      <h2>Start:</h2>
      <input id="start" type="text"><br>
      <h2>Destination:</h2>
      <input id="dest"><br><br>
      <button id="route-safe">Get Safest Route</button><br><br>
      <button id="route-dist">Get Fastest Route</button>
      <div id="stats"></div>
    </div>
    <script>
      // Create a driver instance, for the user neo4j with password neo4j.
      // It should be enough to have a single driver per database per application.

      var driver = neo4j.v1.driver("bolt://localhost:7687", neo4j.v1.auth.basic("neo4j", "wyanOSM"));

      var mymap = L.map('map').setView([42.19, -83.154453], 14);

      var mapboxURL = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}';
      var mbattribution = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>';
      var at = 'pk.eyJ1Ijoia3Jvbm9zZ3JlZW4iLCJhIjoiY2prOHR3aWNyMDRteTNxczA4OG9od3QyaSJ9.oIwV1KDSRnZw8aOGt_gEbQ';

      // Code for heatmap
      var crashData = {
        max: 40,
        data: [{lat: 42.2262110, lng: -83.181400, count: 12},{lat: 42.2262270, lng: -83.180963, count: 12},{lat: 42.2202230, lng: -83.181377, count: 10},{lat: 42.2138210, lng: -83.175201, count: 4},{lat: 42.2138230, lng: -83.174895, count: 4},{lat: 42.1996572, lng: -83.169478, count: 3},{lat: 42.1996602, lng: -83.168959, count: 3},{lat: 42.2037470, lng: -83.177643, count: 3},{lat: 42.2313980, lng: -83.149202, count: 3},{lat: 42.2138840, lng: -83.168655, count: 3},{lat: 42.1998340, lng: -83.159434, count: 3},{lat: 42.2107640, lng: -83.149063, count: 2},{lat: 42.2137830, lng: -83.179528, count: 2},{lat: 42.2031690, lng: -83.150017, count: 2},{lat: 42.2038500, lng: -83.170795, count: 2},{lat: 42.1996312, lng: -83.170657, count: 2},{lat: 42.1996102, lng: -83.171650, count: 2},{lat: 42.2031050, lng: -83.153171, count: 2},{lat: 42.2039700, lng: -83.162889, count: 2},{lat: 42.2037270, lng: -83.178935, count: 2},{lat: 42.2038720, lng: -83.169110, count: 2},{lat: 42.2037270, lng: -83.178935, count: 2},{lat: 42.2070490, lng: -83.180319, count: 2},{lat: 42.2210720, lng: -83.180937, count: 2},{lat: 42.2138710, lng: -83.169738, count: 2},{lat: 42.2174280, lng: -83.170952, count: 2},{lat: 42.2192380, lng: -83.172126, count: 2},{lat: 42.1970210, lng: -83.179981, count: 2},{lat: 42.1922180, lng: -83.179819, count: 1},{lat: 42.2139407, lng: -83.163776, count: 1},{lat: 42.1851230, lng: -83.172460, count: 1},{lat: 42.1852370, lng: -83.166290, count: 1},{lat: 42.2188770, lng: -83.180855, count: 1},{lat: 42.2139407, lng: -83.163776, count: 1},{lat: 42.2140275, lng: -83.156993, count: 1},{lat: 42.2138540, lng: -83.171449, count: 1},{lat: 42.2140340, lng: -83.156447, count: 1},{lat: 42.2283610, lng: -83.149688, count: 1},{lat: 42.2326539, lng: -83.159176, count: 1},{lat: 42.2096070, lng: -83.154987, count: 1},{lat: 42.2020590, lng: -83.153138, count: 1},{lat: 42.1997180, lng: -83.165794, count: 1},{lat: 42.1995780, lng: -83.173762, count: 1},{lat: 42.1996572, lng: -83.169478, count: 1},{lat: 42.1996602, lng: -83.168959, count: 1},{lat: 42.1996312, lng: -83.170657, count: 1},{lat: 42.1978579, lng: -83.151671, count: 1},{lat: 42.2030760, lng: -83.154776, count: 1},{lat: 42.2038500, lng: -83.170795, count: 1},{lat: 42.2040890, lng: -83.156396, count: 1},{lat: 42.2076450, lng: -83.148498, count: 1},{lat: 42.2075220, lng: -83.154920, count: 1},{lat: 42.2052780, lng: -83.151674, count: 1},{lat: 42.2210240, lng: -83.168911, count: 1},{lat: 42.2228320, lng: -83.168970, count: 1},{lat: 42.2138710, lng: -83.169738, count: 1},{lat: 42.2185810, lng: -83.165392, count: 1},{lat: 42.2192320, lng: -83.171020, count: 1},{lat: 42.2174250, lng: -83.172062, count: 1},{lat: 42.2174190, lng: -83.174244, count: 1},{lat: 42.1852126, lng: -83.167974, count: 1},{lat: 42.1970370, lng: -83.176805, count: 1}]
      };

      var cfg = {
        // radius should be small ONLY if scaleRadius is true (or small radius is intended)
        "radius": 0.003,
        "maxOpacity": .8,
        // scales the radius based on map zoom
        "scaleRadius": true,
        // if set to false the heatmap uses the global maximum for colorization
        // if activated: uses the data maximum within the current map boundaries
        //   (there will always be a red spot with useLocalExtremas true)
        "useLocalExtrema": true,
        // which field name in your data represents the latitude - default "lat"
        latField: 'lat',
        // which field name in your data represents the longitude - default "lng"
        lngField: 'lng',
        // which field name in your data represents the data value - default "value"
        valueField: 'count'
      };

      // Set up Layers
      var satellite = L.tileLayer(mapboxURL, { id: 'mapbox.satellite', attribution: mbattribution, maxZoom: 18, accessToken: at }).addTo(mymap);
      var streets = L.tileLayer(mapboxURL, { id: 'mapbox.streets', attribution: mbattribution, maxZoom: 18, accessToken: at }).addTo(mymap);
      var heatmapLayer = new HeatmapOverlay(cfg);
      heatmapLayer.setData(crashData);

      var baseLayers = {
        'Satellite' : satellite,
          'Streets' : streets
      }
      var overlayLayers = {
          'Crash Heatmap' : heatmapLayer
      }

      L.control.layers(baseLayers, overlayLayers).addTo(mymap);

      function drawLine(points) {
        var line = []
        for(var i = 0; i < points.length; i++){
          var newPoint = new L.LatLng(points[i][0], points[i][1]);
          line.push(newPoint);
        }
        var polyline = new L.Polyline(line, {
           color: 'red',
           weight: 3,
           opacity: 0.5,
           smoothFactor: 1
        });
        polyline.addTo(mymap);
      }

      document.getElementById("route-safe").onclick = function(){
        var from = document.getElementById("start").value;
        var to = document.getElementById("dest").value;
        var pCoords = null;
        var session = driver.session();
        session
          .run('MATCH (from:MapPoint {roads: "' + from + '"}), '
          + '(to:MapPoint {roads: "' + to + '"}), '
          + 'paths = allShortestPaths((from)-[:NEXT*]-(to)) '
          + 'WITH REDUCE(dist = 0, rel in rels(paths) | dist + rel.distance) AS distance, '
          + 'REDUCE(safety = 0, n in nodes(paths) | safety + n.safety) AS safety, '
          + 'paths AS p '
          + 'ORDER BY safety '
          + 'RETURN p, distance, safety', {})
          .then(function (result) {
            var routed = false;
            result.records.forEach(function (record) {
              if(!routed){
                var path = record.get('p').segments;
                var pathCoords = [];
                var coords = [];
                for(var i = 0; i < path.length; i++){
                  coords = [path[i].start.properties.latitude, path[i].start.properties.longitude];
                  pathCoords.push(coords);
                }
                pathCoords.push([path[path.length-1].end.properties.latitude, path[path.length-1].end.properties.longitude]);
                drawLine(pathCoords);
                document.getElementById("stats").innerHTML = "<h3>Distance: </h3>"
                                                              + (record.get('distance') * 70)
                                                              + " mi" + "<br><h3>Safety: </h3>"
                                                              + record.get('safety');
                pCoords = pathCoords;
                routed = true;
              }
            });

            console.log("ROUTE\nFrom: " + from + "\nTo: " + to + "\n\nCoords:\n");
            console.log(pCoords);

            session.close();
          })
          .catch(function (error) {
            console.log(error);
          });
      }

      document.getElementById("route-dist").onclick = function(){
        var from = document.getElementById("start").value;
        var to = document.getElementById("dest").value;
        var pCoords = null;
        var session = driver.session();
        session
          .run('MATCH (from:MapPoint {roads: "' + from + '"}), '
          + '(to:MapPoint {roads: "' + to + '"}), '
          + 'paths = allShortestPaths((from)-[:NEXT*]-(to)) '
          + 'WITH REDUCE(dist = 0, rel IN rels(paths) | dist + rel.distance) AS distance, '
          + 'REDUCE(safe = 0, n IN nodes(paths) | safe + n.safety) AS safety, '
          + 'paths AS p '
          + 'ORDER BY distance '
          + 'RETURN p, distance, safety', {})
          .then(function (result) {
            var routed = false;
            result.records.forEach(function (record) {
              if(!routed){
                var path = record.get('p').segments;
                var pathCoords = [];
                var coords = [];
                for(var i = 0; i < path.length; i++){
                  coords = [path[i].start.properties.latitude, path[i].start.properties.longitude];
                  pathCoords.push(coords);
                }
                pathCoords.push([path[path.length-1].end.properties.latitude, path[path.length-1].end.properties.longitude]);
                drawLine(pathCoords);
                document.getElementById("stats").innerHTML = "<h3>Distance: </h3>"
                                                              + (record.get('distance') * 70) + " mi"
                                                              + "<br><h3>Safety: </h3>" + record.get('safety');
                pCoords = pathCoords;
                routed = true;
              }
            });

            console.log("ROUTE\nFrom: " + from + "\nTo: " + to + "\n\nCoords:\n");
            console.log(pCoords);

            session.close();
          })
          .catch(function (error) {
            console.log(error);
          });
      }

      window.onclose = function(){
        // Close the driver when application exits.
        // This closes all used network connections.
        driver.close();
      }
    </script>
  </body>
</html>
